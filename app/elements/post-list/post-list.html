<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../post-message/post-message.html">

<dom-module id="post-list">

  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
        max-width: 512px;
        
        -webkit-transition: 0.6s;
        transition: 0.6s;
      }
      
    </style>
    <iron-ajax
      id="ajaxRequest"
      auto
      url="http://api.oversimplified.io/messages"
      handle-as="json"
      last-response="{{response}}"></iron-ajax>

      <template is="dom-repeat" items="{{response}}">
        <post-message item={{item}}></post-message>
      </template>

      <!--
      <template is="dom-repeat" items="{{response}}">

        <iron-ajax
          id="deleteMessage"
          auto
          url="{{url}}"
          method="DELETE"
          on-response="handleResponse"
          debounce-duration="300"></iron-ajax>
        </paper-icon-button>

        <paper-material elevation="1" flex id="card-message">
          <div id="head" class="horizontal layout flex">
            <div>
              <img src="{{item.author.img}}" alt="avatar" class="avatar">
            </div>
            <div class="vertical layout" id="name-zone">
              <span class="username">{{item.author.name}}</span>
              <span class="timestamp">{{item.date}}</span>
            </div>
            <div class="horizontal end-justified layout" flex>
              <paper-icon-button icon="report" class="small"></paper-icon-button>
              <paper-icon-button icon="favorite" class="small"></paper-icon-button>
              <paper-icon-button icon="delete" class="small" onclick="deletePost()"></paper-icon-button>
            </div>
          </div>
          <div id="separator"></div>
          
          <div id="content">
            <span>{{item.content}}</span>
          </div>
        </paper-material>

      </template>
      -->
      <br>
  </template>

</dom-module>

<script>
//http://api.oversimplified.io/message/"
  Polymer({
    is: 'post-list',
    properties: {

    },
    
    refresh: function() {
      this.$.ajaxRequest.generateRequest();
    }
  });
</script>