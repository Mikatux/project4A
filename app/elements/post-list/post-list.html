<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="post-list">

  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
        background-color: #FFFFFF;
      }
      
      #head {
        background-color: var(--accent-color);
        margin: 4px 4px;
      }
      
      #content {
        
      }
      
    </style>
    <iron-ajax
      auto
      url="http://back.oversimplified.io/messages"
      handle-as="json"
      last-response="{{response}}"></iron-ajax>

      <template is="dom-repeat" items="{{response}}">

        <paper-material elevation="1" flex>
          <div id="head">
            <img src="{{item.author.img}}" alt="profile image" style="width:64px;height:64px;border-radius: 2px;">
            <span>{{item.author.name}}</span>
            <span>{{item.date}}</span>
          </div>
          
          <div id="content">
            <span>{{item.content}}</span>
          </div>
        </paper-material>

      </template>
      <br>
  </template>

</dom-module>

<script>
  Polymer({
    is: 'post-list',
    properties: {
      url: {
        computed: 'computeUrl()'
      }
    },
    computeUrl: function() {
      return 'http://back.oversimplified.io/messages';
    }
  });
</script>