<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/ion-sound/js/ion.sound.min.js">

<dom-module id="send-box">

  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
        max-width: 512px;
      }
      
      #card-message {
        background-color: #FFFFFF;
        margin: 12px;
        min-height: 64px;
        padding: 8px;
      }
      
      #message-content {
        
      }
      
      paper-button.green {
        color: var(--paper-light-green-500);
        --paper-button-flat-focus-color: var(--paper-light-green-50);
        
        -webkit-transition: 0.2s;
        transition: 0.2s;
      }
      paper-button.green:hover {
        background: var(--paper-light-green-50);
        
        -webkit-transition: 0.2s;
        transition: 0.2s;
      }
      paper-button.ripple {
        --paper-button-ink-color: var(--paper-green-a200);
      }
      
      #send-button {
        
      }
      
    </style>

    <paper-material elevation="1" flex id="card-message">
      <form is="iron-form" id="form" method="post" action="http://back.oversimplified.io/message">
        <paper-input name="content" label="Send a message" id="message-content"></paper-input>
        <paper-input name="type" value="text" hidden></paper-input>
        <paper-input name="userId" value="56154da0d32c233e52f30815" hidden></paper-input>
        <div class="horizontal end-justified layout">
          <paper-button onclick="submitForm()" class="green ripple" id="send-button"><iron-icon icon="send"></iron-icon>Send</paper-button>
        </div>
      </form>
    </paper-material>

  </template>

</dom-module>

<script>
  Polymer({
    is: 'send-box',
    properties: {
      
    }
  });
  
  function submitForm() {
    if (document.getElementById('message-content').value != "") {
      document.getElementById('form').submit();
      document.getElementById('message-content').value = "";
    }
  }
  
  function send() {
    ion.sound({
      sounds: [
          {
              name: "my_cool_sound"
          },
          {
              name: "notify_sound",
              volume: 0.2
          },
          {
              name: "alert_sound",
              volume: 0.3,
              preload: false
          }
      ],
      volume: 0.5,
      path: "sounds/",
      preload: true
    });

    
  }
</script>

<!--

<form is="iron-form" id="form" method="post" action="http://back.oversimplified.io/message">
 <paper-input name="content" label="content"></paper-input>
 <input name="type" value="text" hidden>
 <input name="userId" value="56154da0d32c233e52f30815" hidden>
<paper-button raised onclick="submitForm()">Send</paper-button>
</form>

<script>
function submitForm() {
 document.getElementById('form').submit();
}

-->