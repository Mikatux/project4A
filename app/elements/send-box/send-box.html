<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../paper-textarea/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/ion-sound/js/ion.sound.min.js">

<dom-module id="send-box">

  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
        max-width: 512px;
      }
      
      #card-message {
        background-color: #FFFFFF;
        margin: 12px;
        min-height: 64px;
        padding: 8px;
      }
      
      #messageContent {
        
      }
      
      paper-button.green {
        color: var(--paper-light-green-500);
        --paper-button-flat-focus-color: var(--paper-light-green-50);
        
        -webkit-transition: 0.2s;
        transition: 0.2s;
      }
      paper-button.green:hover {
        background: var(--paper-light-green-50);
        
        -webkit-transition: 0.2s;
        transition: 0.2s;
      }
      paper-button.ripple {
        --paper-button-ink-color: var(--paper-green-a200);
      }
      
      #send-button {
        
      }
      
    </style>

    <paper-material elevation="1" flex id="card-message">
      <form is="iron-form" id="form" method="post" action="http://api.oversimplified.io/message">
        <paper-textarea name="content" label="Send a message" id="messageContent"></paper-textarea>
        <paper-input name="type" value="text" hidden></paper-input>
        <paper-input name="userId" value="56154da0d32c233e52f30815" hidden></paper-input>
        <div class="horizontal end-justified layout">
          <paper-button on-click="submitForm" class="green ripple" id="send-button"><iron-icon icon="send"></iron-icon>Send</paper-button>
          <iron-a11y-keys
            id="keys"
            keys="shift+enter"
            target="{{}}"
            on-keys-pressed="_updatePressed">
          </iron-a11y-keys>
        </div>
      </form>
    </paper-material>

  </template>

</dom-module>

<script>
  Polymer({
    is: 'send-box',
    properties: {
      
    },
    
    submitForm: function() {
      if (this.$.messageContent.value != "") {
        
        this.$.form.submit();
        this.$.messageContent.value = "";
      }
    },
    
    _updatePressed: function(event) {
      console.log(event.detail);
    }
  });
</script>

<!--

<form is="iron-form" id="form" method="post" action="http://back.oversimplified.io/message">
 <paper-input name="content" label="content"></paper-input>
 <input name="type" value="text" hidden>
 <input name="userId" value="56154da0d32c233e52f30815" hidden>
<paper-button raised onclick="submitForm()">Send</paper-button>
</form>

<script>
function submitForm() {
 document.getElementById('form').submit();
}

-->